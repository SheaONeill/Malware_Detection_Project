#!/bin/bash
#
#
#
#

#call this function if its a file to check and save md5 and filename results to hash.log
file_to_check_function () {

    echo -e "\nChoice= $choice"
    echo -e "\n-------------------------------------------"
	echo "Testing Malware test_file_to_check_function"
	echo -e "-------------------------------------------\n"
	echo -e "(Select filename <ctrl><shift><c> to copy <ctrl><shift><v> to paste)";	
	echo -e "\nAvailable Files"
	ls ${ABSOLUTE_PATH}/test_dir
	echo
	echo -n "Enter filename check:";read FileToCheck
	echo -e "\nLocating $FileToCheck ........"
	#find file and set the location using command substitution
	#uncomment following line to search whole computer (much slower)
	#location=$(find / -name $FileToCheck -type f)
	#this will search from the current directory of setup script
	location=$(find ${ABSOLUTE_PATH}/ -name $FileToCheck -type f)
	#display the FileToCheck and locaton  
	echo -n "$FileToCheck is located at: $(dirname "${location}")"
	#needed to wrap brackets otherwise it included path and file name
	#md5=$(md5sum ${location2})
	#eg. output of $md5 was <some-hash-value> <path><filename>
	#
	#check if ssdeep
	if [ "${choice}" == "ssdeep_check" ]; then
	#
	#fuzzy or md5 check
    echo -e "\nChoice= $choice"
    exit 0
    fi
    #
	which_md5=($(md5sum ${location})) 
	#display the file checked and md5sum
	echo -e "\nThe MD5sum of ${FileToCheck} is: $which_md5"
	#TODO get log directory 
	#eg echo $md5 > ${LOG_DIR}${LOG_NAME}
	echo -e "\nThis script dir $(dirname "$0")"
	echo $which_md5 > ${LOG_DIR}/hash.log
	
	
}

#call file_to_check_function
file_to_check_function
#call read_hash_log_function.sh script
${ABSOLUTE_PATH}/read_hash_log_function.sh
