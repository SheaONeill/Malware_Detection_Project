#!/bin/bash
#
#
#
#

#call this function if its a dir to check and save md5 and filename results to hash.log
dir_to_check_function () {
    echo -e "\nChoice= $choice"
	#to do store paths in variables as locations may change
	echo -n "current directory: ";pwd

	#ABSOLUTE_PATH="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
	
	echo "Abs path ${ABSOLUTE_PATH}"
    echo -n "enter the directory to check: "
    #uncomment next line to search for specific directory
	#read scan_dir	
	#comment next line to search for specific directory
	scan_dir="${ABSOLUTE_PATH}/test_dir/"
	echo -e "\nScan dir is $scan_dir"
	cd $scan_dir
	echo -n "current directory now is: ";pwd
	location="$(pwd)"
	echo -e "\nLocation is: ${location}"
	#
	#check if ssdeep
	if [ "${choice}" == "ssdeep_check" ]; then
	#
	#fuzzy or md5 check
    echo -e "\nChoice= $choice"
    exit 0
    fi
    #
	#find hashes of executables
	find . -name "*" -type f -executable | md5sum * > ${LOG_DIR}/hash.log
	echo -e "\nHash log find files directory results"
	cat ${LOG_DIR}/hash.log
	}

#call dir_to_check_function
dir_to_check_function
#call read_hash_log_function.sh script
${ABSOLUTE_PATH}/read_hash_log_function.sh
